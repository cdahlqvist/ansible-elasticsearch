
{% if es_config %}
{{ es_config | to_nice_yaml }}
{% endif %}

{% if es_config['cluster.name'] is not defined %}
cluster.name: elasticsearch
{% endif %}

{% if es_config['node.name'] is not defined %}
node.name: {{inventory_hostname}}-{{es_instance_name}}
{% endif %}

#################################### Paths ####################################

# Path to directory containing configuration (this file and logging.yml):
path.conf: {{ conf_dir }}

path.data: {{ data_dirs | array_to_str }}

path.logs: {{ log_dir }}

{% if not "security" in es_xpack_features %}
xpack.security.enabled: false
{% endif %}

{% if ("security" in es_xpack_features) and (es_xpack_ssl_key_src != '') %}
xpack.ssl.key: {{ es_xpack_ssl_key_path }}
xpack.ssl.certificate: {{ es_xpack_ssl_certificate_path }}
xpack.ssl.certificate_authorities: [ {{ es_xpack_ssl_certificate_authorities_path }} ]
xpack.security.transport.ssl.enabled: true
xpack.security.http.ssl.enabled: true
{% endif %}

{% if not "monitoring" in es_xpack_features %}
xpack.monitoring.enabled: false
{% endif %}

{% if ("monitoring" in es_xpack_features) and (es_xpack_monitoring_metrics_datastore_host != '') %}
xpack.monitoring.exporters.id1.type: {{ es_xpack_monitoring_metrics_datastore_protocol }}
xpack.monitoring.exporters.id1.host: ['{{ es_xpack_monitoring_metrics_datastore_protocol }]://{{ es_xpack_monitoring_metrics_datastore_host }}:{{ es_xpack_monitoring_metrics_datastore_port }}'] 
{% endif %}
{% if ("monitoring" in es_xpack_features) and (es_xpack_monitoring_metrics_datastore_user != '') %}
xpack.monitoring.exporters.id1.auth.username: {{ es_xpack_monitoring_metrics_datastore_user }}
xpack.monitoring.exporters.id1.auth.password: {{ es_xpack_monitoring_metrics_datastore_password }}
{% endif %}

{% if not "alerting" in es_xpack_features %}
xpack.watcher.enabled: false
{% endif %}